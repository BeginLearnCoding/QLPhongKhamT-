@page 
@model PhongKham.Web.Pages.QLToaThuoc.CreateToaThuocModel
@{
}
<div class="container" style="margin-top: 20px;">
    <div class="row">
        <div class="col container">
            <div id="viewAll" class="card-body table-responsive"> </div>
        </div>
        <style>
            #myForm {
                border: 1px solid black;
                padding: 20px;
            }
        </style>
        <div class="col container">

            <div class="col-sm-12 border border-dark p-3">
                <h4 class="text-center">Toa Thuốc</h4>
                <form method="post" asp-page-handler="CreateToaThuoc">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="form-group row">
                        <label class="col-md-3 col-form-label">Mã phiếu Khám Bệnh</label>
                        <div class="col-md-9">
                            <input type="text" autocomplete="off" asp-for="addToaThuoc.PhieuKhamBenhId" name="PhieuKhamBenhId" class="form-control" style="margin-right: 1rem; width: 100%;"required>
                            <span asp-validation-for="addToaThuoc.PhieuKhamBenhId" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-3 col-form-label">Ghi chú</label>
                        <div class="col-md-6">
                            <input type="text" autocomplete="off" asp-for="addToaThuoc.GhiChu" name="GhiChu" class="form-control" style="margin-left: 1rem; width: 100%;" required>
                            <span asp-validation-for="addToaThuoc.GhiChu" class="text-danger"></span>
                        </div>
                        <div class="col-md-3">
                            <button type="submit" class="btn btn-success">Tạo Toa</button>
                        </div>
                    </div>


                </form>

                <div id="viewListThuoc" class="card-body table-responsive"> </div>
            </div>
        </div>
    </div>
</div>
@section Scripts
{
    <script>
        $(document).ready(function () {
            $('#viewAll').load('?handler=ViewAllPartial');
        });
        $(document).ready(function () {
            $('#viewListThuoc').load('?handler=ViewToaThuocPartial');
        });
        $('.btn-outline-success').on('click', function (e) {
            e.preventDefault();
            // Submit the form using AJAX
            var form = $(this).closest('form');
            $.ajax({
                url: form.attr('action'),
                method: form.attr('method'),
                data: form.serialize(),
                success: function (response) {
                    // Update the view with the response
                    $('#toaThuoc').html(response);
                }
            });
        });
        $('#myForm').on('submit', function (e) {
            e.preventDefault();
            // Submit the form using AJAX
            var form = $(this);
            $.ajax({
                url: form.attr('action'),
                method: form.attr('method'),
                data: form.serialize(),
                success: function (response) {
                    // Update the view with the response
                    $('#toaThuoc').html(response);
                }
            });
        });
       
    </script>




}
